// This file is actually js, but it holds html templates.
// 728x90 ad unit (leaderboard)
{

goodloop.html = {};

// NB: &#9654; is play-triangle

goodloop.html.leaderboard = () => 
`<div id='gdlpid'>
	<div class='unit' onclick="goodloop.act.openLightbox();">
		<header>        
			<img class='logo' alt='ADS FOR GOOD' src='afg-white.png' />
			<h2>${goodloop.variant.expln}</h2>
			<img class="adlogo" src='${goodloop.vert.logo}' alt='${goodloop.vert.name}' title='Watch their short advert and ${goodloop.vert.name} will fund your donation'>
			<span class="play"></span>
		</header>
		<span class="rarrow"></span>
		<ul class="charities">
			${charity_li(goodloop.charities[0])}
			${charity_li(goodloop.charities[1])}
			${charity_li(goodloop.charities[2])}
		</ul>
	</div>
</div>`; 

let charity_li = (charity) => ! charity? '' :
`<li class='chty' data-cid='${charity.id}' title='${charity.name}'>
	<img class='clogo' src='${charity.logo}'/>
	${charity.photo? `<img class='cphoto' src='${charity.photo}'/>` : ''}
</li>`;

goodloop.html.mediumrectangle = goodloop.html.leaderboard;
goodloop.html.stickybottom = goodloop.html.leaderboard;
goodloop.html.vbnr = goodloop.html.leaderboard;


// NB: backdrop is to catch exit clicks
goodloop.html.backdrop = "<div class='backdrop'></div>";
goodloop.html.videobox = () => `
<div class="gdlp videobox">	
	<button class="close" title="close this advert">&times;</button>
	<div class="vcontainer">
		<img class='logo' alt='ADS FOR GOOD' src='afg-black.png' />
		<video id='gdlpvid${Math.round(Math.random()*1000)}' src="${goodloop.env.isMobile? goodloop.vert.mobileVideo : goodloop.vert.video}" controls=""></video>
		<div class="charity_chooser">
			<h2>Pick the charity you'd like to receive a free donation.</h2>
			<ul class="video_charities">
				${charity_li(goodloop.charities[0])}
				${charity_li(goodloop.charities[1])}
				${charity_li(goodloop.charities[2])}
			</ul>
		</div>
		<div class="message"></div>
	</div>
</div>`;

goodloop.html.msgdonated = () => `<a href='${goodloop.vert.url}' class="company_name">${goodloop.vert.name}</a> 
	has funded your donation to ${goodloop.state.charity.name}`;

/** replaces the contents of videobox .vcontainer*/
goodloop.html.endpage = () => `
<div class="endpage">
	<p><a href='${goodloop.vert.url}'><img class="adlogo" src='${goodloop.vert.logo}' alt='${goodloop.vert.name}'></a> 
		has funded your donation to 
		<a href='${goodloop.state.charity.url || "http://good-loop.com"}'>${goodloop.state.charity.name || 'the Good-Loop fund.'}</a>
	</p>
	<p><small>The amount donated is a full 50% of the advert value. The amount varies - about 10p is average. These adverts also support the website.</small></p>
	<p>Double your donation by sharing</p>
	<p class="share">
		${goodloop.html.social()}
	</p>
	<p class="ty">Thank you for watching this <a href="http://good-loop.com" class="gl">Good-Loop</a> ad!</p>
</div>`;

goodloop.html.social = function() {
	var adurl = 'https://as.good-loop.com/share/'+escape(goodloop.vert.id);
	var msg = 'I donated '+goodloop.variant.adsecs+' seconds to '+(goodloop.state.charity.name || 'charity')+' by watching this advert';
	return `
	<a class="fb" href="https://facebook.com/sharer/sharer.php?caption=Ads+For+Good&u=${escape(adurl)}&description=${escape(msg)}">
		<img src='facebook.png' class='fb' alt='Facebook'>
	</a> 
	<a class="tw" href="https://twitter.com/intent/tweet?text=${escape(msg+' '+adurl+' via @good__loop')}">
		<img src='twitter.png' class='tw' alt='Twitter'>
	</a>`;
};

/** goes inside div.unit, replacing the advert */
goodloop.html.tq = () => `
    <div class="thankyou">
        <div class='dntn'>
			<a href="${goodloop.vert.url}" class="company_name">${goodloop.vert.name}</a>
			<span>funded your donation to</span>
			<a href='${goodloop.state.charity.url || "http://good-loop.com"}'>${goodloop.state.charity.name || 'the Good-Loop fund.'}</a>
		</div>
		<a href="http://good-loop.com" class="gl_link">Find out more about opt-in ads by <span class='gl'>Good-Loop</span>.</a>
		<div>${goodloop.html.social()}</div>
    </div>`;

}